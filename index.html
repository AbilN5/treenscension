<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Treenscension</title>
	<link rel="stylesheet" href="Treenscension/Stylesheets/BaseStyle.css">
	<link rel="stylesheet" href="Treenscension/Stylesheets/MainTabStyle.css">
	<header id="header">
		
		<div class="main" id="technicalElements">
			
			<ul class="leftElements">
				<li class="pointerCursor headerButton tabMark" id="jsOptions" data-target="#options">Options</li> 
				
				<span>|</span>   
				
				<li class="pointerCursor headerButton tabMark" id="jsSave" data-target="#save">Save</li> 
				
				<span>|</span>  
				
				<li class="pointerCursor headerButton tabMark" id="jsChangelog" data-target="#changelog">Changelog</li>
			</ul>


			<ul class="rightElements">
				<li class="pointerCursor" id="discord">Discord</li>
			</ul>
		
		</div>

	</header>
</head>
<body>
	
	<!--SIDE TAB SELECTOR-->
	<div class="main" id="side">
		<button class="sideButton tabMark jsMainSelected sideSelected" data-target="#statistics">Statistics</button>
		<button class="sideButton tabMark" data-target="#skills">Skills</button>
		<button class="sideButton tabMark" data-target="#growth">Growth</button>
		<button class="sideButton tabMark hidden"data-target="#fight">Fight</button>
		<button class="sideButton tabMark hidden"data-target="#actions">Actions</button>
		<button class="sideButton tabMark hidden"data-target="#astralRealm">Astral Realm</button>
		<button class="sideButton tabMark hidden"data-target="#treenscension">Treenscension</button>
		<button class="sideButton tabMark hidden"data-target="#universe">Universe</button>
		<button class="sideButton tabMark hidden"data-target="#genesis">Genesis</button>
		<button class="sideButton tabMark hidden"data-target="#void">Void</button>
	</div>

	<!--STATS (need to organize it better)-->
	<div id="stats">
		<div id="statsBorder">
			<div id="statsGhostContainer">
				
				<h1 id="jsStatsTitle">LONGEVOUS WILLOW TREE</h1>
				<div id="dashContainer">
					<div id="statsDash"></div>
				</div>

				<div id="statsText">
					<div id="jsPhysicalStats">
						<p class="leftElements" id="jsAgeStats">
							Age: <span id="jsAgeCurrent">1K</span>/<span id="jsAgeExpected">10K</span>
						</p>
						<p class="leftElements" id="jsSizeStats">
							Size: <span id="jsSize">300m</span>
						</p>
						<div class="clearFloatBoth"></div>
					</div>

					<div class id="jsMentalStats">
						<p id="jsIntelligenceStats">
							Intelligence: <span id="jsIntelligence"></span> 
						</p>
					</div>
					
					<div id="jsMagicalStats">
						<p id="jsManaStats">
							Mana: <span id="jsMana"></span> 
						</p>
					</div>


					<div id="jsSpiritualStats">
						<p class="leftElements" id="jsGenesisStats">
							Genesis: <span id="jsGenesis"></span> 
						</p>
						<p class="leftElements" id="jsVoidStats">
							Void: <span id="jsVoid"></span>
						</p>
						<div class="clearFloatBoth"></div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<!--LOG-->
	<div id="log">
		<div id="logBorder">		
		
			<h1 id="logTitle">Log</h1>

			<div id="logTableContainer">
				<table id="jsLogTable">
					
					<tr>
						<td class="jsLogIdentifier">event (4)</span></td>
						<td class="jsLogEvent">Lorem ipsum, dolor sit amet consectetur adipisicing elit.</td>
					</tr>
					<tr>
						<td class="jsLogIdentifier">event (4)</span></td>
						<td class="jsLogEvent">Lorem ipsum, dolor sit amet consectetur adipisicing elit.</td>
					</tr>
					<tr>
						<td class="jsLogIdentifier">event (4)</span></td>
						<td class="jsLogEvent">Lorem ipsum, dolor sit amet consectetur adipisicing elit.</td>
					</tr>
					<tr>
						<td class="jsLogIdentifier">event (4)</span></td>
						<td class="jsLogEvent">Lorem ipsum, dolor sit amet consectetur adipisicing elit.</td>
					</tr>
					<tr>
						<td class="jsLogIdentifier">event (4)</span></td>
						<td class="jsLogEvent">Lorem ipsum, dolor sit amet consectetur adipisicing elit.</td>
					</tr>
					<tr>
						<td class="jsLogIdentifier">event (4)</span></td>
						<td class="jsLogEvent">Lorem ipsum, dolor sit amet consectetur adipisicing elit.</td>
					</tr>				
					<tr>
						<td class="jsLogIdentifier">event (4)</span></td>
						<td class="jsLogEvent">Lorem ipsum, dolor sit amet consectetur adipisicing elit.</td>
					</tr>

				</table>
			</div>

		</div>
	</div>

	<!--MAIN TABS-->
	<div class="mainTab">

		<div class="mainContainer hidden" id="options">

		</div>

		<div class="mainContainer hidden" id="save">

		</div>

		<div class="mainContainer hidden" id="changelog">

		</div>



		<div class="mainContainer statisticsContainer" id="statistics">
			
			<h1>Statistics</h1>
			<div class="innerContainer">
			
				<div class="statistics" id="statisticsTab">
					<button class="statisticsTabButton tabMark jsStatisticsTabSelected statisticsTabSelected" data-target="#generalStatistics">General</button>
					<button class="statisticsTabButton tabMark" data-target="#skillsStatistics">Skills</button>
					<button class="statisticsTabButton tabMark" data-target="#growthStatistics">Growth</button>
				</div>


				<div class="statisticsContent">
					<ul id="generalStatistics" class>
						<li>Playtime (total): </li>
						<li>Playtime (effective): </li>
					</ul>
					<div id="skillsStatistics" class="hidden"></div>
					<div id="growthStatistics" class="hidden"></div>
				</div>

			</div>
		</div>

		<div class="mainContainer hidden" id="skills">

		</div>

		<div class="mainContainer hidden" id="growth">

		</div>

	</div>

	<script>
		//UI


		//VARIABLES DECLARATION

		//Only change this for name changes
		const tabElements = {
			tabs: {
				main: 'main',
				statistics: 'statisticsTab',
			},

			delegatorElements: {	//for event delegation
				side: 'side',
				statistics: 'statisticsTab',
			},

			splitElements: {	//for elements that are tabs but can't use event delegation
				header: 'header',
			},
		}

		//constructed tab objects
		const groupNamesMain = [tabElements.delegatorElements.side, tabElements.splitElements.header];
		const mainTab = new tabSelectionObject(tabElements.tabs.main, groupNamesMain);

		const groupNamesStatistics = [tabElements.delegatorElements.statistics]
		const statisticsTab = new tabSelectionObject(tabElements.tabs.statistics, groupNamesStatistics);

		
		//event parameters object
		const eventParameters = {	//this is tricky, always put event parameter as a string and use a bidimensional array with the second array being the array without 'event'
			mainTabClick: [['event', mainTab], [mainTab]],
			statisticsTabClick: [['event', statisticsTab], [statisticsTab]],	
		}

		//markers
		const tabMark = 'tabMark';


		//LOAD RUN

		//events
		//main tab click event 
		//main -> header tab, click
		const headerButton = `${tabElements.splitElements.header}Button`;
		splitElements('click', headerButton, selectTab, eventParameters.mainTabClick);
		delegatorElement('click', tabElements.delegatorElements.side, selectTab, eventParameters.mainTabClick);
		delegatorElement('click', tabElements.delegatorElements.statistics, selectTab, eventParameters.statisticsTabClick);

		//statics tab click event
	

		//FUNCTIONS

		//event listener functions
		//adds event listener for each element with a certain class
		function splitElements(event, splitClass, callback, parametersArray) {
			const nodeList = document.querySelectorAll(`.${splitClass}`);
			
			nodeList.forEach(node => {
				node.addEventListener(event, function(event) {
					const hasEvent = parametersArray[0].includes('event');

					if (hasEvent) {
						callback(event, ...parametersArray[1]); 
					} else {
						callback(...parametersArray[1]);
					}
					
				});
			});
		}

		//adds event listener for delegator element
		function delegatorElement(event, delegatorID, callback, parametersArray) {
			const delegator = document.getElementById(delegatorID);


			delegator.addEventListener(event, function(event) {
				const hasEvent = parametersArray[0].includes('event');
				if (hasEvent) {
					callback(event, ...parametersArray[1]); 
				} else {
					callback(...parametersArray[1]);
				}

			});
		}

		//hidden-active transition
		const body = document.getElementById('body');
		body.addEventListener('transitionend', function() {

		});


		//tab objects constructor
		function groupObject(className) {
			this.className = `${className}Button`;
			this.cssSelected = `${className}Selected`;
		}

		function tabSelectionObject(parentClassName, groupNamesArray) { 
			this.class = parentClassName;
			this.groups = [];
			groupNamesArray.forEach(className => {
				const group = new groupObject(className);
				this.groups.push(group);
			});
				
			this.jsSelected = `js${parentClassName.charAt(0).toUpperCase() + parentClassName.slice(1)}Selected`
		}
		
		

		//event functions
		function selectTab(event, tabObject) {
			const clickedElement = event.target;

			//ensure it's clickable
			if (clickedElement.classList.contains(tabMark)) {
				const previousTab = document.querySelector(`.${tabObject.jsSelected}`);
				
				//ensure it's not the same element
				if (!clickedElement.classList.contains(tabObject.jsSelected)) {
					clickedElement.classList.add(tabObject.jsSelected);
					
					//find group to add CSS
					const clickedElementGroup = findGroup(clickedElement, tabObject);
					clickedElement.classList.add(clickedElementGroup.cssSelected);

					//activate target
					const clickedElementTarget = document.querySelector(clickedElement.dataset.target);
					clickedElementTarget.classList.remove('hidden');
					
				}

				//remove previous tab selected css
				if (previousTab) {
					
					const previousTabGroup = findGroup(previousTab, tabObject);
					previousTab.classList.remove(tabObject.jsSelected);
					previousTab.classList.remove(previousTabGroup.cssSelected);
					

					const previousTabTarget = document.querySelector(previousTab.dataset.target);
					previousTabTarget.classList.add('hidden');
				}
			}
		}

		//Utility functions
		function findGroup(element, tabObject) {
			return tabObject.groups.find(group => element.classList.contains(group.className));
		}


		//Log logic 
		/*
			event constructor - to be made

			const logTable = {
				repetition,
				eventObject: {},
				logCurrent: 0,
				logMax: 200
			}

			function eventObject(eventType, eventParametersArray, eventString) {
				eventType = eventType;
				eventParameters = eventParametersArray;
				eventString = eventString; //save it with the paramters to use and use eval to make it a template string
			}

			function onEvent(repetition, eventObject) {

				if (eventType === logTable.eventType) {
						logTable.repetition += repetition;
						
				}
 
			}

		*/

	</script>
</body>
</html>
